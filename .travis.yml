language: java
jdk:
- openjdk8
sudo: false
before_cache:
- rm -f  $HOME/.gradle/caches/modules-2/modules-2.lock
- rm -fr $HOME/.gradle/caches/*/plugin-resolution/
cache:
  directories:
  - "$HOME/.gradle/caches/"
  - "$HOME/.gradle/wrapper/"
install: skip
test: skip
jobs:
  include:
  - stage: build snapshot
    if: branch = master
    script: "./gradlew check jacocoTestReport release -PossrhRepoUrl=${SNAPSHOT_OSSRH_REPO_URL}"
  - stage: build release
    if: branch =~ /release/
    script: "./gradlew check release -Pversion=${TRAVIS_BRANCH#'release/'} -PossrhRepoUrl=${RELEASE_OSSRH_REPO_URL}"
after_success:
- bash <(curl -s https://codecov.io/bash)
env:
  global:
  - SNAPSHOT_OSSRH_REPO_URL: https://oss.sonatype.org/content/repositories/snapshots/
  - RELEASE_OSSRH_REPO_URL: https://oss.sonatype.org/service/local/staging/deploy/maven2
  - secure: llTcDKapp/x/zqk3J2EsJEAHeVR13OZA4CWYooI6aqYPdyhC+em+Q9yjrKoayZyLNHaY8wW1DS1t6WyltN/UtOjRcGIIIDb8eE41jDm9WiQ9/0SR+FaJybxILJSkXtu0ctg0mw003MS15JhDYw57xL/jtXecd7AzPxis7oNyM7t6dgaYphXLS2vAgiq97rXSZBUHTglVxRriAfAvVx7X7NXXbKBmIYhBX5PAB2ev1CcD8fE9Q+rp70l2qedffjge7PalYa7Mm7y0MCZP8iYzLOYXRG+LxFUAYExEd/3wQhEcsfZzpQ8SV3vKxfTnJnC38HMlBw3IWceofwrAWqZGPdTXAg/mlHnPRxQGf6g81VcpzijYAH1ezDS/HMEGAoI+vL+zBMK5r48wpv2ZMYIeu5aBAm3Qid/L7EQiIhnVzGwUmEoOnFHjTs4TYh0AFjSWaSycclYVdMIRPEppO09yW8zZOVnixdQclCuI/O/EcKpqFheQPGOlGlGXRPGrkfued2DpIXUie4NKlUpDNpvs5v0L66fIGva/d4jA/ShffAfd2Dqp03pdXagPswlDFLk020pCCU7aCFIomzcsLSG9CWQxlcsipCPMZ7s0EsfsdB3c8NApcSNJQtgV6RffYOLvHKkkV8/fMT/OsffeXLzEO0gU95MVWv0TsbFCLD/u1wg=
  - secure: JfM5E89KrI3Zs0R0WYQ1umSTH/ZdaTjLeBtgEJbCbK93PUB4zP1R7kkqmwtg1dKvckPcYi5U8kDxSyqybClO2HeddLzbYw972Vp4QSSsMnBecLA4HHgnGgxQNnaKt+XQTcWCGEVctvunnlpCQbscVcLU962rcKYIzUO+aRB0USrnyDeBqWEy0nnpmJKhVEbUzAaPTuNpnNtdLXIVbm4SrJ10CRRllYaZ5488dGNQp1mX5q/vLOb6Q3lvs/6E4R9PIfilU0yvrB94f9UFiN+UiGeLbpCK9nSr4mAU6rjd+axUS/YaxCDqObfYaGC0Ktwf+dHyXVsu/NUR+PNGBr/hZ91dgHov31oUe9r49tcs1TB3bB7aEjTJYlEmnUBRQMe2PPlm4Bsl5KrxMmL0azYM5XBwa1baGbkZTjIRAtvu4T3ScSwEoFkkjzy9GR9WV6+Zk3d8cXu4Uvr9DLoBjWIW1r0i0gaAJ53jx6gj01yTZEGcJdA8S/GEfkpjpAgmwMhJbuAVQePz/S/1ptgxMMWkBjPjc/pdbCgwjBVmTGUK9vR0BAYCFQ1iLOMy3bl4ywDP1j2jKLJbxK9QMHMubRnpqi85bhPDMEBVNlDETp4XqN0prA8Qz++lI17tW0I0lptFPT9pp5Yi8BgK2jFyOZnvTj3pbp/DFfG3gT4WfNEYwr0=
  - secure: ONjeliXtYkbRAmI2Um6wClKM4bYFp7dtRQqXzVwZFCUok533aRYR5E+tRnoFeal+VPNsg9gETc5x9B7wdItHo0qKYbZ32auQqATVCX5h/m+k8hwLNl8f86wwuTnfqlSc1OAoCWEwZfPUMBntZ4RAsTDtaw43fHWETCFrf7QOKXXk16I+//k94+DN21hG2tckSNLXXRN/NGBjNtk/N/iejCHCra8HXXzmB61geyNi1YD2abk+dLHL7mzUyZWA0EaEqqqoan+AhATPOWuGhf2mgwODhPKl1qZKxluPhd5xu8Lgr0oQWW8eDSfyorDZZMmNpCF4vNtp3pz+eX79hNdRKoMsK5B/rcEXiP/BlKFLUyYhUeK3u1PxGixvA37r7JcAObDkzUa0ZjwJQ7wHXputkqymxGyenbv1bgLqkPWZ0pUy5Ff5UGUg8QT7ipR1bKo0GHkQ13PsDDbc4hVzMd6gumZqAlfHv+2RP61ly/aNkr+PRQsJMo5YLPD9jyfpW4sR5HxJMESEpWXfbL1DjZnG2XV3JZsHYZdcBoVV2NMKVRyfWRRsrrvPKjCMe+Lz/yz9AUQG0s10KyNP1jcb4E3ss9jv3Bp9m+py94JKCMvoBhO/1lRGS58rQP0p8g+KNENKgibqk9evsF/j1nxd5miBE+wslbF5avoq7oE4Puq1WPA=
  - secure: F+8IN7knEpJPb8+cWGP/CH2eXJJAHrabQQpPnToZjjV3pRZ3rXQ4YbWU/DTl5FLJvxHtSKBUEUbgDbGhykLAaqq3SMiD1wFHXTBtj2YqjDcQ1wPDOfN+lbUk5yeqDk5njzXUa7eMZfPKcIAu8y+9iXPDlBb43AsGTpkIdgLIrTqKzSiZIkpEPRmZ2xAQ7ZqwIQeSL1KxgrrGpwwcHmxogb9copko8a5edbyveHicxh7QjfG//WFVORWSHSxsx9wYAGF+lITa70MRmjre3DSH9qK0cFyndR+X0Y4g5T9fDp/vd8nuGv1rUgjQGRANL5Xl41SJXZrs1qp9A+YpVP6x8UBB4llo9GxtHNXQ5Yz0bRlihHCDa/vu7O4HI3IUQU9hiMr/9ONhufXp2QNVqW1MjvitZQU6sBJZRR0Q0RrUtf5qaWvceS4wvMO/bjovWkANGJgl82OnGKiwKLTN0cZAr2TIQZGmcVZdEZm+v0jiTiY9aJuHcdoOrLMxhc3jC0uWAMeU9XzeyRWr17YsAMTV0LIlzEWhVqfM7+6Bhf5o2vlpI0Nx4yXuWzaDQKwbO+7vnby2WrW00BKbgncN4NRNxMPnuGAqHDgu8szWdGsjcAIUrSHp7s+UKWU2dHR52bLQ+Bjg8Ia4ydukibjrVqk0ulDJ51Tj0qxxmUNCf2DsK1k=
  - secure: l53QDSdWBVKPduwmTpA/bjgCcHreEC7+AWzmHHkedWASuTRPJpJ1spiByDUOPN/ZRl7nBb8UbBxXNWGUhcDTFTGieVsAhcyK5bkZLRBO3DsKZhPu1CN0GYergLk3R5Jf5t1nxYXbmpCQlgAkMZGhwCreazZKwi8MUD7L4LXvS6KFLmPpt5BOO0xg6K3Gfk/cpIIkHqYDw3Qkyca8BLnMmswTZnMiwAcmoFdwbztHnuvoj4DUKiqY6Zzq2HE/dOrhLoAiDXH7X/dkCjdn4BVc33ThP7rBOV1pOfIaui5tICyN0ItNgdq8Xy9Hie3xULCD1fVbyj1nXVVEGL12Nj4AaEiydFSfu90NLaDSZKXv5ynmzTz9auDngKrkug8iC7UnX7DeogjSQJiL8uNexE7zgrZhUoSbN/iM8C7ce5L5pND8Yw7cMKYNDrXhWaTnqxzjl3KpOFkPx/lzei9DAvop91tesaEhV2jOSdSsO9lyC/TAVNUiMIBMHv7wd2VTn3jmXJvamTUSGvDxRWluyUxExnv4rJyOZAfAcgOc/MGWcbiYJfkgOFphlC/ZQz6nDkf+qjwnDub5uhm8wmHlEJikQL9BRDebvnRv8ML/La5qL1JaDtlVOi+Gd8CTPpkT8g8ZexlryuawzlSFWjHWrzbFL3cVeLTToNrWguylDlUKRSo=
