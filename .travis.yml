language: java
jdk:
- openjdk8
sudo: false
before_cache:
- rm -f  $HOME/.gradle/caches/modules-2/modules-2.lock
- rm -fr $HOME/.gradle/caches/*/plugin-resolution/
cache:
  directories:
  - "$HOME/.gradle/caches/"
  - "$HOME/.gradle/wrapper/"
install: skip
test: skip
jobs:
  include:
  - stage: build snapshot
    if: branch = master
    script: "./gradlew check jacocoTestReport release -PossrhRepoUrl=${SNAPSHOT_OSSRH_REPO_URL}"
  - stage: build release
    if: branch =~ /release/
    script: "./gradlew check release -Pversion=${TRAVIS_BRANCH#'release/'} -PossrhRepoUrl=${RELEASE_OSSRH_REPO_URL}"
after_success:
- bash <(curl -s https://codecov.io/bash)
env:
  global:
  - SNAPSHOT_OSSRH_REPO_URL: https://oss.sonatype.org/content/repositories/snapshots/
  - RELEASE_OSSRH_REPO_URL: https://oss.sonatype.org/service/local/staging/deploy/maven2
  - secure: F5jt0M4QIYd2+Ra8fQh3gydsfGnTV5k1qAFs7fnDAOzq4uWxOwKzXvNwtnMzKyjyG6uJE5Tt8A28XaGlRBtZ7B04LyP+NFwylPvM16iZXgt+JyT0LEHhFCM2PZkXXqv5kt0tkIcNQAbOSjkRz8MEXH6ahJMU1JrCLnE77PEWjhnzGzUhW4kgvm9KBoiBXkgErN6JP2D4S+X/0uc+PrNYjuxT9ZtWFLdorLmICsKTldgD1kQqR6LHVe0jis2N2VfiaWsMmZXqA15119yBbeAZb0+1rZ92KG/sJYt+0FFnCAx7hKVZ76pS8zh3Q+/RPI4mF/pZdkSMGuvSXJ+qcb06+nXUV/fqmHSXpD4ZnxKmCIatuka7KDhmTK9DUKljT8GezpOrHL3IwkVb8LJpMLLBLEogJmgeoW5TpQpWMbr6FneMAeGgfuCpo9CehZ9drGf1W2HO1Dk4jf7aKbHcWHJIiGEoDbUd0vvVttc7AAdiIANeknuI8vQMQOgvHqtJj57nP4uePsrU7KaoyIba87VDC1ZeFOwr0SPgC71DagRogDVwXs6pFJ1xWDWBRPZZLjkj/DZC0b9M7ycq34G5gFIbky1EGZJ3/PBUJnfT8i+ZrHjo11nFB0ScHHwvbk9qjsBrqxLZqG8sCdj9FRVfXzaSVteE+BDM/c0/GppYVrsMLNI=
  - secure: OTXDeGu7sAxhLrhVKIJ0T6ibJEKNGXr5sC15dWtx2yvZRCndUmiKYUHyEnhJRqemaSQ1wMruZe8fxhmQBEyQVz6KYOm8+fxRsPrYY99jVSnt32YbKmy49OwP247O1qlLaodXDaDzsefFdsNal5iogu1QO4xwILor/RcPSgkoVAGcvN9WH4gOad+37iaYwvVq6vX/QkqVwICwpf6ym5pWXi9MApSxpS6AlJ9TiXrSAy1C1Vgim6eYQa7Vhjb+zbkIXY4520GE7auDaim0VI/ubLzH0wxe7eb1AP8JP56gc3vboH+n2SboVBn84PntCleeGUtZuds2zCbFm0mdZTW8tw5kyClyVs8nZYP86kjZluhrS6NbnL4cbouRla5pQfAEf8cWJIo+8K93xp2xyIDXySBFsIgSL+oz7lVwWk3aHQTJZfBm2/Ok5qO3rpDlRTn4Cla+/4eGrhisMbV7i9B+DOXFOtKjT0lX1QTpn4DGvrOniE+F+eIiXkjRb6mz0lz67k48ki8v0gN4Twa6+x8zcp/PJvIWryezJDV9gWoZ45a2jfxlvRX/00Ngh4lhu4CBDjiRrR4MdXEc3Tc8c0q682xg0tRjp2avNd/iZeEKOCzwlDF8i9ER4+sHuYX2xfNi9xqeMtubb4GYZwRteoRt2DdXH4QfE1oyug/6uy+rKZ0=
  - secure: C0n5qcP19MepCXGpaLWZYm8syuwWcg68DPzQ5IxQu5NiP3vz4CxOXOtKQxSLU7FfONPqroBkvl80Pel12GHGcRokqHtWRUX/GeGriFI+LKimuB8XZUcfzFbAQhe7eye1dkdj/EB/T3dMlngORDEnWWEaiyBxb0AWD1E7EKEAOuDbnwCE4naQPHZtYDpVJS9HKfqMrq11OdZmVRYYW5whJj/Sp4+2QOg4UbgQkmwn3h4wHt2l8ljhL2FV4WtmGfNsnYERoRYQppslQqhYg/RfGN0R2LyrgeXxwPMWRKiZ0SoeZN0YnShiBD6rmfHlu+oBjJiZkQLd5okWn5f7arHxBWuIqaFv/9KG3WxIdoH210LCYexFmAxwxwMjlXgfxWO6SghadkIlfin8Z8/oaHLL0lUad7+DqhVWkMhIBPA1Y6BohcZPUysQOD8/lHm0P7BbIDWxr0HGpxa5cZqaTLDib6u4jrXE6TpnLPs9EEKot1bGDU9uvawJ9YcAfqd06VUucHC/5vFAFrIN+4FcY6gXPb2qq9f1fTTdXCwIgnFPudPpisXYh5QI58x6u93LTc1WEes7jZXpipr9oEVAQpFYazed70zhcRap1FNmZXZpaouhOytbBdKhnO3Fz4zeRjUuFwQm5U1WqoXYH251Pok/fX7fPfR8/RE66TOfmwXW9/I=
  - secure: omQkszdgZiwncluygSi0cCzJe5iWbHQBNPYDMBm+fdJiVq2sO8NZNXwCaiwcLXGc5BeRtu9mBYTiEg1bkYsCNoqCixtTB3Nwpl0cqeB4YNFObVfMJAC2O2Z0o5Cqtp/PEMf3qvxL51AlpQzE4ANZG8JHhrwLzXP9FY8WdbNUVz/Dcq/FbG0fgbHTiK6NL+yZLeVBgykGd81m0ssyHEm6o9oluOZ2olUVwXlhBR0KZlnZ0ZQBIC6CpbsldtrfJkLFpnOBS3dnvyM+pZmJhJ9ccjgvm2dsNFCSNLbbBm5sCI3oq/Bm9P4KJTQAUQtXd3TuKkSGh7kv7daPE9NMvLhtwWRaHRjqDqg9c5p8ezxDvol7A5XEWSAlcwRMTZkNTY/Jorkg/ox2FR/hc4dVd1nJkhHBsTbc1ufLuS5UupAGYqacT3rArDCLKmaLijiC1phKaYd59pKYzVeYUstkQR2vNrvvTsx5qhRBwNdzdtUaWXlKSqlDRUzR5R3tJhTq9fkuikcQlAKsMOWjsBj4HJXuYVeqyVFepiTNJ2AwmV1czv02XUab6yCVSN/GDpgVjBtmrmR6LlylvrwFWTS9wr94PPOc47LQnZnk9yrOjLPunJbHqTkzVxsdXNQo0NRAaTPPg5QdGMwkrXYHVIGevspTJ2aoI/D63RKPW3qDjRS1SGU=
  - secure: JCAH2cja69BbJIO7q6L/YFE+OBKcP8b1JZifcOVoshWseI/2mN9VJSlFPvdmBUUmyRJeFgOLAnfVS+mvegQZZWSni7VZ2BMYHwe9FtVQ3j4+bteS6oBN7JsRAmjF8pr76QTnEmrprsQJxZ1CFSiEPHdGMGPw3icmvDfHhX1V8ubbQV+ylDwhglWWUbl9ZGz3tMmoivKLgPM5FQDh9QioTOp39FZ0a8rfDHS1f/dYERM+PJgZFhDHBLRtFJPPKgPLzirMNnozHctVT7mOAAEeXVZeNq7PdPfgaF1qzGvtxZrLHPLzqSkfw94StT0fa4Qoq+aCleXjSW7cWmu1A8an3F+f2ZIldyQ1w634r92BlNsM6Emrif/+ZMbCYgxvsOPBvWv9VtdnJpzW6kRUH9RduSOAedHQhqW1e6qRdrwZv6SIO1oXrOIsx2IqA32CfsI2WMC5LOqP4esUy3FtQZsthR8M1icES5IOCWdLmlLWDvdHgbkZHyTNV5Bbpwn1nOfypcYciOSxqFKWZi2Fj5eiEA/rqCaDAN14tc9S7kbNAqT27uVOf8qdhspYg60STKJl05DWauv4/mHNpypzT/MnW0q3fYGxdpEiJma9VJq2fMrxTzE5J5WsY5QnC+T0BtDl7lDla/ZXj4wAiT7jf13f08Zd8Ne1mzUHdEhD2wOmqis=
