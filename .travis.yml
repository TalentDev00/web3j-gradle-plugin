language: java
jdk:
- openjdk8
sudo: false
before_cache:
- rm -f  $HOME/.gradle/caches/modules-2/modules-2.lock
- rm -fr $HOME/.gradle/caches/*/plugin-resolution/
cache:
  directories:
  - "$HOME/.gradle/caches/"
  - "$HOME/.gradle/wrapper/"
install: skip
test: skip
jobs:
  include:
  - stage: build snapshot
    if: branch = master
    script: "./gradlew check jacocoTestReport release -PossrhRepoUrl=${SNAPSHOT_OSSRH_REPO_URL}"
  - stage: build release
    if: branch =~ /release/
    script: "./gradlew check release -Pversion=${TRAVIS_BRANCH#'release/'} -PossrhRepoUrl=${RELEASE_OSSRH_REPO_URL}"
after_success:
- bash <(curl -s https://codecov.io/bash)
env:
  global:
  - SNAPSHOT_OSSRH_REPO_URL: https://oss.sonatype.org/content/repositories/snapshots/
  - RELEASE_OSSRH_REPO_URL: https://oss.sonatype.org/service/local/staging/deploy/maven2
  - secure: EH8aOdkZaGgMSJWRJN2xZ/ag+z8EGXZ0YGVY/oMjuI+26OlfnhMkTnDkwltPYTPLMUI5cM2C7iWrwiZWSKySqz3LjwGxfNt47cbPACJLzDvCArdkYB2xm5EdNffmbkCE6HOeMvFV9rLcYBzhqI647Nf2qTwO/sslDTdhW9kw4/C3yyJGBPMnenQx+GZcXzK19QbHSpz//Qyfdl5lRiHzai6acJakF/6z8qP/jMouqzLQS6SXFB0VL7R6dxgDeC3QLcoN5Zprnnv0e2KvH/f7qHb+XgWcZ8lsJ/9KwmWuGLV6bDhXrh9122Q0VQYia5yWj8Ct6tlGE8hx4C2Svf3o//PnLZT+Lu0hlI5qSOMpuDM94KKXQ5GNdmvBQakJwu2yQdsXnLu+fndbuPwAPJz7g21Lkva3kqFsskYic4rJvPDK4PKH4bdAbbnfvIxH3jLhTzN1J0zZx3JW8Q/43pSleIRzVqT6lwBnnR9AMrrhF2bljvv2E1mtb8gUIkOrmq0N/dzBiAYfN7gT09pMQPYqKIH4Pg1+FDiBWXXdmNKahx5DJLHCsuI48Lv6uMEVoyS/GqOyH70ZD3dPHn7bJdwlEVaCwYkO7dJVniR16kG5HxJwXyzdeIgx1Q6x8XZWd5BvNSlKEYkWVBGbfbYmrVFRByrmLI3BcDsPQo8Hbp2A7Ic=
  - secure: OtG86SGdm1LsrzH4U1CTXc3Qqa72W+/zNDT5b0lqvfuFBNKMzHqL5F5RxL+DLgVS935oRTm+wRd8jBz8NCERvK5bcsQ24jlHX32N15h94kpRY5iw6ipbRx3bAnz+qAlvd3l+7o5UJwo98eyDgkj7YjdDmEjeeBhKBXxXXH2/Ha+szRTD0fOYSr6g9Rx9xEoxKab0YLHoRjffhBrl4PVyN74Uxb4QdarNNj4rXHuozgtrv/HwjQuugMCOKvDUbVcR4ghFiM7G1sh/V1gsXkocpCjBDewGKXWb3N7Z+odOJU3f2H+Q2smumRs3oQw7IAPeJGIVuAqKUj+BySoBRxoJbERkHauyclVQeR55YKOTkwOoYCPxYUCQE1mMPPGh9MWlMkTj5HnOn9UuHufD0t3yBuPnKcwyZjgJSgOM17Q5xqpGvN/Pbu1ksOslehcnVbSHh5lfej+8omTRlxCVOXrpgeKALMGvAuyM1m8enjxIXroTIYfinjEApwckvy7A8f3MHhmw/7yQ7PT93unv/m+Tv3HVnzsz2tRyY6e5QpGxOEtVRePZNoMfyV+D4IcjwWgdHMnDCba+tTrFuw9BEMKr7z0PWZdJcjXWh3HyjY9K5CaWfktHJ7h5mRUAoO84QP98vIvSy28XLIAro6/IHhEWShnEex/YvA6YD49oHXf13FQ=
  - secure: cK7IRLLwpFyyZWFNphLDJDWkuJlmwd7IkVc6hocbI0gFwvAZ7zOWEPmhjLImWNYqqxLWHDADYrEECHUS4/JWhL1W2ppxOzOUNrnSCIIef6srevBFds0b7ym53sZZREsQ6IIJdCXhn39lKXFT/8Z5YmAFgWXn5x22cG/9K+UpieOR/mAAe7RIdi+z8lSSBelPbZ7gL0n97AhPZkbi0TefyVcIOqayMn/f4FKhGTFK1Gkrm4wDrmXlw5QtggEd3qASmYx8vOcDGxWomOcQa6+srO2+2kdQU8V4UaDGwDwiwmhv7ijXj2IsLCowsKm1DEegvh6SDc9XrLu1HGWOKxKxUX8LUcYYrE1RxSlecqsOJXkLIKs9AOrZGDWFyS8CoyGHAtk6nlyV5uLlZu4hawWo9Eedomw18AjamZVNiHkjeDOV1Z35AQ2Z2MZSpbkz5ZowJr0UsMi3LzDHx69J/KcuJ5Ml5eWNxgKrJYsUxm2ZFQU3aqAIwZ2tFo9wGMMQFmgkOY+KaevBs8BRP7EjmpmerXaKf5siuz1jGlmFSbdG+20nBSWDfCExhJPtH4hVv5yjykWRawF0haRHriZBeig+AEznaS1DXbu9cz13hUBtU9jxZpFswXhoskPnUe9wDaf291zox38IrCGw13pvWiaN0gAQE/Oby7orOupcUiv34uI=
  - secure: hT2KYkQFxJ9t0pzv6T5Kw3Cmb9tr7I/XLn0F1eO6ViH+JN2TJEYl06Q+Et1nPHQTFZP0Lp4h6sBdt+z6sUD7IAYdOVy9TS3ZfajJRV2bVcBHdm0cZJv/iVZNZGUcmciSZ6f/GFXD0/rFbI0s9lr7/PlHvaOpLQ6fL4HYyA4vJ6g+ixIRaGn46RL5kfE0zHT4lzjdnQXktjhNF/MM+cRBIDobVNA4EYBPk7rZxctbQmPqlfb1JhUQZ03gWRPDsB1UVsXfpLNQx2IId02j214BKzByUaoWO8leeg7dZlP0sP66SyL1MViMET4Vw237SdsHrAoEDEltiwOuNEWhxUCJsZCZLUwxmJPB/RJuUd3NN9Ee7f5X99VGDEOO8bLWOxNJZIUnZC/210Xt8AX8MUliDMXF73tqZG00Keh10Gb1OEhpSBnpmiCws/1yLtgs4Hs7HR0y8K+/mxGFTZDWfxcNPX0YkTI3xVg0gsYqWKgW04fClF/iWyfq3Ui2VJ0oICpWLX8WUPGkMxJZm4snm8lX/gwNJyEuRmRPaTevQC+7t5+0HPbnf/KQfFQ3ze/3vpO9rUXvcf5f6WO9dFZjWyOHPa4PD2L2qh+ixdxQuY5FTbUjAsGYnTl54GTIhHpu/n4mUsu9+d/Q1m7j48j/1Y1NbCPOcMcDIvqBAMUUq/LQ1oo=
  - secure: swFtDlnqG4hlFvzhoCFycy+pG/QZexihdNSUFiLlMGk2b6MNjk4F6SBCNamQW3vWhy+WdUTfsC3ybd4joQZ5zdmDsAKbYYtTi/igKOhjhrU64S3fP+seQppJ/VG0f8cnQ+4hniQ/rr/jgnwX45mWXOQuG23VAgJzHBj17v/NvyLPOvDe6b0DfmmJWSnu6YlsaFi6IDCMb2Z94RnRV9Uij2dm/5LxcWxkGqOT96LXiK9v9OIJPQCQGOcio4cm0xCjm6YlsSGnV75IsMw0wY3POQrG9x2OTvBmHF+YD5gzo8VNNGtBoyson9osZ0mXH/EQzzWo0GSY/miJNkwrF9HLRaPkzjNN+hg2/KwqzdTuC6atheRUr1eoNuZKQR965OCaqb1aFPgdJoxBXilIsaFFl0qJxVGuJjZSDaWvUIKxCy6ptpleei0B0Cem8TsGtlFoz+hzySeMybEutHB6dFfnxxrvNu7lz97ezvn9mClSa0zrAF3BR5hfXW1v81CFpfb5i4I2ffhPdhU1Yp2uejBdPD5CMhylq6hACU6/DuNS1v9sij0d1COBNiydkiNTnfvrwbXVWIY1lbhGTRCi23J8777LX1r1Szh/PEEdAJX/RPXRU7B//4Vb2D+Zf1cxOpYFkKFKk+oFbNMhiADViglRVBopdHD9KTP1hXyCAWSvmzM=
